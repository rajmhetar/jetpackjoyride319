<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:v="urn:schemas-microsoft-com:vml"
 xmlns:o="urn:schemas-microsoft-com:office:office"
 xmlns:w="urn:schemas-microsoft-com:office:word"
 xmlns:m="http://schemas.microsoft.com/office/2004/12/omml"
 xmlns:st1="urn:schemas-microsoft-com:office:smarttags"
 xmlns="http://www.w3.org/TR/REC-html40">
<head>
  <meta http-equiv="Content-Type"
 content="text/html; charset=windows-1252">
  <meta name="ProgId" content="Word.Document">
  <meta name="Generator" content="Microsoft Word 14">
  <meta name="Originator" content="Microsoft Word 14">
  <base target="_parent">
  <link rel="Edit-Time-Data" href="index_files/editdata.mso">
  <title>I2C</title>
  <o:smarttagtype
 namespaceuri="urn:schemas-microsoft-com:office:smarttags" name="place"></o:smarttagtype><o:smarttagtype
 namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="PlaceName"></o:smarttagtype>
  <o:smarttagtype
 namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="PlaceType"></o:smarttagtype>
  <link rel="themeData" href="index_files/themedata.thmx">
  <link rel="colorSchemeMapping"
 href="index_files/colorschememapping.xml">
  <style>
  </style>
</head>
<body style="background-color: white;" alink="#0000ff" lang="EN-US"
 link="blue" vlink="#c40026">
<div class="WordSection1">
<p style="text-align: center;" align="center"><span
 style="font-size: 18pt;">I2C</span><br>
<table class="MsoNormalTable"
 style="border: 3pt outset ; background: rgb(255, 204, 153) none repeat scroll 0% 50%; -moz-background-clip: initial; -moz-background-origin: initial; -moz-background-inline-policy: initial; width: 100%;"
 border="1" cellpadding="0" width="100%">
<tr>
<td>
<p><b><span style="font-size: 18pt;">Readme</b></span>
            <br> &nbsp;<br>
This is a C language project that demonstrates the <i>Inter-Integrated Circuit</i>
interface (I2C). This
project interfaces the OPT3001 optical sensor to the microcontroller.
There is one function, <b>I2C_LightSensor_Input</b>, that performs all
the steps: start, wait, and read result. The problem with
this approach is the <b>I2C_LightSensor_Input</b> takes a long time to execute.
A better approach separates the three steps.
The function <b>I2C_LightSensor_Start</b> starts the conversion, allowing
the system to perform other tasks. At a later time, you can
call <b>I2C_LightSensor_End</b>, which will return true if done.
If <b>I2C_LightSensor_End</b> returns false, your system can perform
other tasks.<br><br>
The OPT3001 is a digital ambient light sensor (ALS) 
that measures the intensity of light as visible by the human
eye. Covering the sensor with your finger or shining a 
flashlight on it will change the output of the OPT3001. The
digital output is reported over an I2C-compatible, two-wire serial interface. 
More information on the OPT3001 light sensor can be found at 
<a href="http://www.ti.com/product/opt3001" target="_blank">
http://www.ti.com/product/opt3001</a>.<br><br>
The TMP006 was discontinued in 2017. Therefore, it is no longer populated on the board.
Documentation of the TMP006 is unchanged in this user's guide to accommodate users who still
have the device populated on the board.

 <br>&nbsp;<br>
The following figure shows one I2C communication. The start and address fields are driven by the master (microcontroller)
	The ACK field is driven by the slave.</p>
<p class="PictureWide"><span lang="en-US"><img src="I2CzoomedIn.png"
    ></span></p>
	<p>
	Next figure shows I2C communication zoomed out. Address 0x44 is the light sensor OPT3001.
	The write communications are from master to slave, and the read
	communications are from slave to master.
	
	
	</p>
<p class="PictureWide"><span lang="en-US"><img src="I2CzoomedOut.png"
    ></span></p>
	
<br>&nbsp;<br>
Derived from Texas Instrument code
<ul>
<li>i2c_controller_rw_multibyte_fifo_poll_LP_MSPM0G3507_nortos_ticlang</li>
<li>gpio_toggle_output_LP_MSPM0G3507_nortos_ticlang</li></ul>
</ul>

</td>

</tr>
</table>
 </p>
 
 <table class="MsoNormalTable"
 style="border: 3pt outset ; background: rgb(252, 243, 144) none repeat scroll 0% 50%; -moz-background-clip: initial; -moz-background-origin: initial; -moz-background-inline-policy: initial; width: 100%;"
 border="1" cellpadding="0" width="100%">
        <tbody>
          <tr>
            <td>
<p><b><span style="font-size: 18pt;">Hardware Required</b></span>
<br>
<ul>
<li>MSPM0G3507 LaunchPad&trade; Development Kit (LP-MSPM0G3507)</li>
<li>Educational BoosterPack MKII (BOOSTXL-EDUMKII)</li>
</ul>
<b><span style="font-size: 18pt;">Pin assignments</b></span>
<br>
<ul>
<li>I2C SCL: PB2 is the ambient light (OPT3001) and temperature sensor (TMP006) PB2_I2C1-SCL</li>
<li>I2C SDA: PB3 is the ambient light (OPT3001) and temperature sensor (TMP006) PB3_I2C1-SDA</li>
<li>Input: PA27 is the ambient light (OPT3001) interrupt </li> 
<li>Input: PB16 is the temperature sensor (TMP006) interrupt </li> 
</li>
<li>Input: PA18 is S2 positive logic switch, index 39 in IOMUX PINCM table</li>
<li>Input: PB21 is S3 negative logic switch, index 48 in IOMUX PINCM table</li>
</ul>
<b><span style="font-size: 18pt;">LaunchPad Jumpers</b></span>
<br>
<ul>
<li>Remove J16 J17 J18: Disconnects light sensor from the microcontroller PA22 PA27 PA26</li> 
<li>J4: Connects PA0 to red LED</li>
<li>J5: Connects PB22 to blue LED2</li>
<li>J6: Connects PB26 to red LED2</li>
<li>J7: Connects PB27 to green LED2</li>
</ul>
</p> </td>
</tr>
</tbody>
</table>

</body>
</html>
<p>
Simplified BSD License (FreeBSD License)
Copyright &copy; 2025, Jonathan Valvano, All rights reserved.<br>
&nbsp;<br> 
Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:<br>
<ol>
<li>Redistributions of source code must retain the above copyright notice,
   this list of conditions and the following disclaimer.</li>
<li>Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.</li></ol>

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE
USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.<br>
&nbsp;<br> 
The views and conclusions contained in the software and documentation are
those of the authors and should not be interpreted as representing official
policies, either expressed or implied, of the FreeBSD Project.
<br> &nbsp;
</p>
<p>For more information, see <a href="http://users.ece.utexas.edu/~valvano/">
http://users.ece.utexas.edu/~valvano/</a>.
</p>
</div>
</body>
</html>
